<DOCTYPE Html>
<html>
</html>
<head>
<title>GAME COBA</TITLE>
</head>
<body>
<script type="text/javascript">
var kartu = [
                ['1\u2660', '2\u2660', '3\u2660', '4\u2660','5\u2660','6\u2660','7\u2660','8\u2660','9\u2660','10\u2660','J\u2660','Q\u2660','K\u2660'],
                ['1\u2661', '2\u2661', '3\u2661', '4\u2661','5\u2661','6\u2661','7\u2661','8\u2661','9\u2661','10\u2661','J\u2661','Q\u2661','K\u2661'],
                ['1\u2662', '2\u2662', '3\u2662', '4\u2662','5\u2662','6\u2662','7\u2662','8\u2662','9\u2662','10\u2662','J\u2662','Q\u2662','K\u2662'],
                ['1\u2663', '2\u2663', '3\u2663', '4\u2663','5\u2663','6\u2663','7\u2663','8\u2663','9\u2663','10\u2663','J\u2663','Q\u2663','K\u2663']
            ]
function ambilKartu(kartu){
  var temp,x,y;
  do{
    x= Math.floor((Math.random() * 3));
    y= Math.floor((Math.random() * 13));
  }while(kartu[x][y] ==='x')
  temp = kartu[x][y];
  kartu[x][y] = 'x';
  return temp;

}
//Function objek player beserta kartunya
function Player(name) {
  var angka;
  this.StringKartu='';
  this.playerName   = name;
  this.jumlahKartu = 0;
  this.handCard   = function(kartuTangan) {
     angka = (kartuTangan.charAt(0));
     if(angka==='J'||angka==='Q'||angka==='K'){
       this.jumlahKartu = this.jumlahKartu+10;
     }else if( kartuTangan.slice(0,2)==='10'){
       this.jumlahKartu=this.jumlahKartu+parseInt(kartuTangan.slice(0,2));
     }else{
       this.jumlahKartu=this.jumlahKartu+parseInt(angka);
     }
    this.StringKartu = this.StringKartu+' '+kartuTangan;
  }
}

  var nama,input,exit;
  var exit=true;
  var bandarTambah=true;
  var playerTambah=true;
  nama = prompt("Selamat Datang di permainan Black Jack \n Masukkan Nama Anda?");
  alert("Cara bermain : Pemain mengambil kartu lalu dijumlahkan,\n jika mendapatkan jumlah sebesar 21 atau mendekati maka anda \nmenang,jika melebihi anda kalah");

  var player1 = new Player(nama);
  var bandar=new Player('bandar');
player1.handCard(ambilKartu(kartu));
bandar.handCard(ambilKartu(kartu));
do{



  if(exit==true){
    input = prompt(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\n Action? \n 1.Hit \n 2.Stand ');

  }


  if(bandar.jumlahKartu >= 17){
    bandarTambah=false;
  }
  if(input=='1'){
    playerTambah=true;
  }else if(input=='2'){
    playerTambah=false;
  }

  if(playerTambah){
    player1.handCard(ambilKartu(kartu));
  }

  if(bandarTambah){
    bandar.handCard(ambilKartu(kartu));
  }

  if(playerTambah==false && bandarTambah==false){
    exit=false;
    if(bandar.jumlahKartu==player1.jumlahKartu){
      alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nAnda SERI!');

    }else if(bandar.jumlahKartu>player1.jumlahKartu){
      alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nAnda Kurang Beruntung');

    }else{
      alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nSelamat, Anda Menang');
    }
  }


  if(bandar.jumlahKartu>21&&player1.jumlahKartu<21){
    exit=false;
    alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nSelamat, Anda Menang');
  }

  if(player1.jumlahKartu>21&&bandar.jumlahKartu<21){
    exit=false;
    alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nAnda Kurang Beruntung');
  }

  if(player1.jumlahKartu==21&&bandar.jumlahKartu!=21){
    exit=false;
    alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nSelamat, Anda Menang');
  }
  if(bandar.jumlahKartu==21&&player1.jumlahKartu!=21){
    exit=false;
    alert(bandar.playerName+'\n'+bandar.StringKartu+' : '+bandar.jumlahKartu+'\n'+player1.playerName+'\n'+player1.StringKartu+' : '+player1.jumlahKartu+'\nAnda Kurang Beruntung');
  }

}while(exit);


 </script>
  </body>
  </html>
